<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDIæˆéƒ½å¥¥å¾·è€ƒè¯•ä¸­å¿ƒæŠ¥åè¡¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 16px;
        }

        .form-container {
            padding: 40px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group label .required {
            color: #e74c3c;
            margin-left: 3px;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .form-control.error {
            border-color: #e74c3c;
        }

        .error-message {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            border-color: #2196F3;
            background-color: #f8f9fa;
        }

        .checkbox-item.selected {
            border-color: #2196F3;
            background-color: #e3f2fd;
        }

        .checkbox-item input[type="checkbox"] {
            margin-right: 8px;
        }

        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-upload input[type="file"] {
            position: absolute;
            left: -9999px;
        }

        .file-upload-label {
            display: block;
            padding: 12px 16px;
            border: 2px dashed #e1e8ed;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload-label:hover {
            border-color: #2196F3;
            background-color: #f8f9fa;
        }

        .file-upload-label.has-file {
            border-color: #4CAF50;
            background-color: #e8f5e8;
        }

        .download-template {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .download-template a {
            color: #856404;
            text-decoration: none;
            font-weight: 600;
        }

        .submit-btn {
            width: 100%;
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .success-message {
            display: none;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
        }

        .error-alert {
            display: none;
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>SDIæˆéƒ½å¥¥å¾·è€ƒè¯•ä¸­å¿ƒæŠ¥åè¡¨</h1>
            <p>æŠ¥åå¥¥å¾·è€ƒè¯•è¯·å¡«å†™ä¸‹åˆ—æ‰€æœ‰ä¿¡æ¯ï¼Œåç»­æŠ¥åæ­¥éª¤å’ŒæŠ¥åæ³¨æ„äº‹é¡¹å°†é€šè¿‡é‚®ä»¶å‘é€ç»™æ‚¨</p>
        </div>
        
        <div class="form-container">
            <form id="registrationForm">
                <!-- åŸºæœ¬ä¿¡æ¯ -->
                <div class="form-group">
                    <label for="firstName">åå­—ï¼ˆæ‹¼éŸ³ï¼‰</label>
                    <input type="text" id="firstName" name="firstName" class="form-control" value="test">
                    <div class="error-message">è¯·è¾“å…¥åå­—</div>
                </div>

                <div class="form-group">
                    <label for="lastName">å§“æ°ï¼ˆæ‹¼éŸ³ï¼‰</label>
                    <input type="text" id="lastName" name="lastName" class="form-control" value="test">
                    <div class="error-message">è¯·è¾“å…¥å§“æ°</div>
                </div>

                <div class="form-group">
                    <label for="gender">æ€§åˆ«</label>
                    <select id="gender" name="gender" class="form-control">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="ç”·" selected>ç”·</option>
                        <option value="å¥³">å¥³</option>
                    </select>
                    <div class="error-message">è¯·é€‰æ‹©æ€§åˆ«</div>
                </div>

                <div class="form-group">
                    <label for="birthDate">å‡ºç”Ÿæ—¥æœŸ</label>
                    <input type="date" id="birthDate" name="birthDate" class="form-control" value="2000-01-01">
                    <div class="error-message">è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ</div>
                </div>

                <div class="form-group">
                    <label for="nationality">å›½ç±ï¼ˆè‹±æ–‡ï¼Œå¦‚: Chinaï¼‰</label>
                    <input type="text" id="nationality" name="nationality" class="form-control" placeholder="China" value="China">
                    <div class="error-message">è¯·è¾“å…¥å›½ç±</div>
                </div>

                <div class="form-group">
                    <label for="birthPlace">å‡ºç”Ÿåœ°ï¼ˆæ‹¼éŸ³ï¼Œè¯·ä¸æŠ¤ç…§ä¿æŒä¸€è‡´ï¼‰</label>
                    <input type="text" id="birthPlace" name="birthPlace" class="form-control" value="test">
                    <div class="error-message">è¯·è¾“å…¥å‡ºç”Ÿåœ°</div>
                </div>

                <div class="form-group">
                    <label for="email">é‚®ç®±åœ°å€</label>
                    <input type="email" id="email" name="email" class="form-control" value="skee.chen@xuezaideguo.com">
                    <div class="error-message">è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€</div>
                </div>

                <div class="form-group">
                    <label for="phoneNumber">æ‰‹æœºå·ç </label>
                    <input type="tel" id="phoneNumber" name="phoneNumber" class="form-control" value="15618401125">
                    <div class="error-message">è¯·è¾“å…¥æ‰‹æœºå·ç </div>
                </div>

                <div class="form-group">
                    <label for="passportNumber">æŠ¤ç…§å·ç ï¼ˆè‹¥æš‚æ— æŠ¤ç…§ï¼Œè¯·å¡«å†™"åè¡¥"ï¼‰</label>
                    <input type="text" id="passportNumber" name="passportNumber" class="form-control" placeholder="åè¡¥" value="åè¡¥">
                    <div class="error-message">è¯·è¾“å…¥æŠ¤ç…§å·ç æˆ–å¡«å†™"åè¡¥"</div>
                </div>

                <!-- è€ƒè¯•ä¿¡æ¯ -->
                <div class="form-group">
                    <label for="examLevel">è€ƒè¯•ç­‰çº§</label>
                    <select id="examLevel" name="examLevel" class="form-control">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="A1">A1</option>
                        <option value="A2" selected>A2</option>
                        <option value="B1">B1</option>
                    </select>
                    <div class="error-message">è¯·é€‰æ‹©è€ƒè¯•ç­‰çº§</div>
                </div>

                <div class="form-group">
                    <label>è¯·é€‰æ‹©æ‰€æœ‰è¦å‚åŠ çš„è€ƒè¯•æ¨¡å—</label>
                    <div class="checkbox-group" id="examModules">
                        <div class="checkbox-item">
                            <input type="checkbox" id="a1_full" name="examModules" value="A1å…¨ç§‘">
                            <label for="a1_full">A1å…¨ç§‘</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="a1_written" name="examModules" value="å•ç§‘A1ç¬”è¯•">
                            <label for="a1_written">å•ç§‘A1ç¬”è¯•</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="a1_oral" name="examModules" value="å•ç§‘A1å£è¯•">
                            <label for="a1_oral">å•ç§‘A1å£è¯•</label>
                        </div>
                        <div class="checkbox-item selected">
                            <input type="checkbox" id="a2_full" name="examModules" value="A2å…¨ç§‘" checked>
                            <label for="a2_full">A2å…¨ç§‘</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="a2_written" name="examModules" value="å•ç§‘A2ç¬”è¯•">
                            <label for="a2_written">å•ç§‘A2ç¬”è¯•</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="a2_oral" name="examModules" value="å•ç§‘A2å£è¯•">
                            <label for="a2_oral">å•ç§‘A2å£è¯•</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="b1_full" name="examModules" value="B1å…¨ç§‘">
                            <label for="b1_full">B1å…¨ç§‘</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="b1_listening" name="examModules" value="å•ç§‘B1-å¬åŠ›">
                            <label for="b1_listening">å•ç§‘B1-å¬åŠ›</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="b1_reading" name="examModules" value="å•ç§‘B1-é˜…è¯»">
                            <label for="b1_reading">å•ç§‘B1-é˜…è¯»</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="b1_speaking" name="examModules" value="å•ç§‘B1-å£è¯­">
                            <label for="b1_speaking">å•ç§‘B1-å£è¯­</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="b1_writing" name="examModules" value="å•ç§‘B1-å†™ä½œ">
                            <label for="b1_writing">å•ç§‘B1-å†™ä½œ</label>
                        </div>
                    </div>
                    <div class="error-message">è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªè€ƒè¯•æ¨¡å—</div>
                </div>

                <div class="form-group">
                    <label for="firstTimeExam">æ˜¯å¦ä¸ºç¬¬ä¸€æ¬¡å‚åŠ è¯¥ç­‰çº§è€ƒè¯•</label>
                    <select id="firstTimeExam" name="firstTimeExam" class="form-control">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="æ˜¯" selected>æ˜¯</option>
                        <option value="å¦">å¦</option>
                    </select>
                    <div class="error-message">è¯·é€‰æ‹©æ˜¯å¦ä¸ºç¬¬ä¸€æ¬¡å‚åŠ </div>
                </div>

                <div class="form-group">
                    <label for="examDate">æŠ¥åè€ƒè¯•æ—¥æœŸ</label>
                    <select id="examDate" name="examDate" class="form-control">
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="2025å¹´8æœˆ27æ—¥">2025å¹´8æœˆ27æ—¥</option>
                        <option value="2025å¹´9æœˆ6æ—¥" selected>2025å¹´9æœˆ6æ—¥</option>
                    </select>
                    <div class="error-message">è¯·é€‰æ‹©è€ƒè¯•æ—¥æœŸ</div>
                </div>

                <!-- æ–‡ä»¶ä¸Šä¼  -->
                <div class="form-group">
                    <label>ç­¾å­—æ–‡ä»¶ä¸Šä¼ ï¼ˆå¯é€‰ï¼Œç”¨äºæµ‹è¯•é™„ä»¶åŠŸèƒ½ï¼‰</label>
                    <div class="download-template">
                        <p>ğŸ“„ è¯·å…ˆä¸‹è½½æŠ¥åé¡»çŸ¥æ¨¡æ¿ï¼Œç­¾å­—åä¸Šä¼ ï¼š
                        <a href="public/SDI_exam_notification.docx" download>ä¸‹è½½æ¨¡æ¿</a></p>
                    </div>
                    <div class="file-upload">
                        <input type="file" id="signedDocument" name="signedDocument" accept=".doc,.docx,.pdf">
                        <label for="signedDocument" class="file-upload-label">
                            <span id="fileText">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½åˆ°æ­¤å¤„ï¼ˆå¯é€‰ï¼‰</span>
                        </label>
                    </div>
                    <div class="error-message">æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼ˆå¯é€‰ï¼‰</div>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">æäº¤æŠ¥å</button>
            </form>

            <div class="loading" id="loading">
                <p>â³ æ­£åœ¨æäº¤ï¼Œè¯·ç¨å€™...</p>
            </div>

            <div class="success-message" id="successMessage">
                <h3>ğŸ‰ æŠ¥åæˆåŠŸï¼</h3>
                <p>æ„Ÿè°¢æ‚¨çš„æŠ¥åï¼Œæˆ‘ä»¬å·²æ”¶åˆ°æ‚¨çš„ä¿¡æ¯ï¼åç»­æŠ¥åæ­¥éª¤å’Œæ³¨æ„äº‹é¡¹å·²é€šè¿‡é‚®ä»¶å‘é€åˆ°æ‚¨çš„é‚®ç®±ï¼Œè¯·æ³¨æ„æŸ¥æ”¶ã€‚</p>
                <p>å¦‚æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·è”ç³»ï¼šinfo@sdi-osd.de</p>
            </div>

            <div class="error-alert" id="errorAlert">
                <h4>âŒ æäº¤å¤±è´¥</h4>
                <p id="errorMessage">ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•ã€‚å¦‚é—®é¢˜æŒç»­ï¼Œè¯·è”ç³»ï¼šinfo@sdi-osd.de</p>
            </div>
        </div>
    </div>

    <script>
        // n8n webhook URL
        const WEBHOOK_URL = 'https://n8n.talentdual.com/webhook/submit-registration';

        // ç¿»è¯‘æ˜ å°„è¡¨
        const translations = {
            gender: {
                'ç”·': 'Male',
                'å¥³': 'Female'
            },
            examModules: {
                'A1å…¨ç§‘': 'A1-Full Course',
                'å•ç§‘A1ç¬”è¯•': 'A1-Written',
                'å•ç§‘A1å£è¯•': 'A1-Oral',
                'A2å…¨ç§‘': 'A2-Full Course',
                'å•ç§‘A2ç¬”è¯•': 'A2-Written',
                'å•ç§‘A2å£è¯•': 'A2-Oral',
                'B1å…¨ç§‘': 'B1-Full Course',
                'å•ç§‘B1-å¬åŠ›': 'B1-Listening',
                'å•ç§‘B1-é˜…è¯»': 'B1-Reading',
                'å•ç§‘B1-å£è¯­': 'B1-Speaking',
                'å•ç§‘B1-å†™ä½œ': 'B1-Writing'
            },
            firstTimeExam: {
                'æ˜¯': 'Yes',
                'å¦': 'No'
            },
            examDate: {
                '2025å¹´8æœˆ27æ—¥': 'August 27, 2025',
                '2025å¹´9æœˆ6æ—¥': 'September 6, 2025'
            }
        };

        // ç¿»è¯‘å‡½æ•°
        function translateField(fieldName, value) {
            if (translations[fieldName] && translations[fieldName][value]) {
                return translations[fieldName][value];
            }
            return value; // å¦‚æœæ²¡æœ‰ç¿»è¯‘ï¼Œè¿”å›åŸå€¼
        }

        // ç¿»è¯‘è€ƒè¯•æ¨¡å—æ•°ç»„
        function translateExamModules(modules) {
            return modules.map(module => translateField('examModules', module));
        }

        // è¡¨å•å…ƒç´ 
        const form = document.getElementById('registrationForm');
        const submitBtn = document.getElementById('submitBtn');
        const loading = document.getElementById('loading');
        const successMessage = document.getElementById('successMessage');
        const errorAlert = document.getElementById('errorAlert');

        // æ–‡ä»¶ä¸Šä¼ å¤„ç†
        const fileInput = document.getElementById('signedDocument');
        const fileLabel = document.querySelector('.file-upload-label');
        const fileText = document.getElementById('fileText');

        fileInput.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                fileText.textContent = this.files[0].name;
                fileLabel.classList.add('has-file');
            } else {
                fileText.textContent = 'ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½åˆ°æ­¤å¤„ï¼ˆå¯é€‰ï¼‰';
                fileLabel.classList.remove('has-file');
            }
        });

        // å¤é€‰æ¡†å¤„ç†
        const checkboxItems = document.querySelectorAll('.checkbox-item');
        checkboxItems.forEach(item => {
            const checkbox = item.querySelector('input[type="checkbox"]');
            checkbox.addEventListener('change', function() {
                if (this.checked) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }
            });
        });

        // è€ƒè¯•ç­‰çº§å˜åŒ–æ—¶é«˜äº®ç›¸å…³æ¨¡å—
        document.getElementById('examLevel').addEventListener('change', function() {
            const level = this.value;
            checkboxItems.forEach(item => {
                const value = item.querySelector('input').value;
                if (level && value.includes(level)) {
                    item.style.borderColor = '#4CAF50';
                    item.style.backgroundColor = '#f0f8f0';
                } else {
                    item.style.borderColor = '#e1e8ed';
                    item.style.backgroundColor = '';
                }
            });
        });

        // è¡¨å•éªŒè¯ï¼ˆç§»é™¤æ‰€æœ‰å¿…å¡«éªŒè¯ï¼Œä¸“æ³¨æµ‹è¯•é™„ä»¶åŠŸèƒ½ï¼‰
        function validateForm() {
            // ç§»é™¤æ‰€æœ‰éªŒè¯ï¼Œè®©ç”¨æˆ·å¯ä»¥ä¸“æ³¨æµ‹è¯•é™„ä»¶åŠŸèƒ½
            return true;
        }

        // æ–‡ä»¶è½¬base64çš„å‡½æ•°
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(',')[1]); // ç§»é™¤ data:... å‰ç¼€
                reader.onerror = error => reject(error);
            });
        }

        // è¡¨å•æäº¤
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }

            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            submitBtn.disabled = true;
            loading.style.display = 'block';
            form.style.display = 'none';
            successMessage.style.display = 'none';
            errorAlert.style.display = 'none';

            try {
                // æ”¶é›†è¡¨å•æ•°æ®
                const formData = new FormData(form);
                const examModules = Array.from(form.querySelectorAll('input[name="examModules"]:checked'))
                    .map(checkbox => checkbox.value);

                // æ”¶é›†åŸå§‹æ•°æ®
                const rawData = {
                    firstName: formData.get('firstName'),
                    lastName: formData.get('lastName'),
                    gender: formData.get('gender'),
                    birthDate: formData.get('birthDate'),
                    nationality: formData.get('nationality'),
                    birthPlace: formData.get('birthPlace'),
                    email: formData.get('email'),
                    phoneNumber: formData.get('phoneNumber'),
                    passportNumber: formData.get('passportNumber'),
                    examLevel: formData.get('examLevel'),
                    examSessions: examModules,
                    firstTimeExam: formData.get('firstTimeExam'),
                    examDate: formData.get('examDate'),
                    timestamp: new Date().toISOString()
                };

                // ç¿»è¯‘æ•°æ®
                const translatedData = {
                    firstName: rawData.firstName,
                    lastName: rawData.lastName,
                    gender: translateField('gender', rawData.gender),
                    birthDate: rawData.birthDate,
                    nationality: rawData.nationality,
                    birthPlace: rawData.birthPlace,
                    email: rawData.email,
                    phoneNumber: rawData.phoneNumber,
                    passportNumber: rawData.passportNumber,
                    examLevel: rawData.examLevel,
                    examSessions: translateExamModules(rawData.examSessions),
                    firstTimeExam: translateField('firstTimeExam', rawData.firstTimeExam),
                    examDate: translateField('examDate', rawData.examDate),
                    timestamp: rawData.timestamp
                };

                console.log('åŸå§‹æ•°æ®:', rawData);
                console.log('ç¿»è¯‘åæ•°æ®:', translatedData);

                // å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼ˆå¯é€‰ï¼‰
                const fileField = formData.get('signedDocument');
                if (fileField && fileField.size > 0) {
                    try {
                        const base64Content = await fileToBase64(fileField);
                        translatedData.signedDocument = {
                            filename: fileField.name,
                            content: base64Content,
                            mimeType: fileField.type
                        };
                        console.log('æ–‡ä»¶å·²ä¸Šä¼ :', fileField.name, 'å¤§å°:', fileField.size);
                    } catch (error) {
                        console.error('æ–‡ä»¶å¤„ç†å¤±è´¥:', error);
                        throw new Error('æ–‡ä»¶å¤„ç†å¤±è´¥ï¼Œè¯·é‡è¯•');
                    }
                } else {
                    // æ²¡æœ‰æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œè®¾ç½®ä¸ºç©ºå€¼ä½†ä¸æŠ¥é”™
                    translatedData.signedDocument = null;
                    console.log('æœªä¸Šä¼ æ–‡ä»¶ï¼Œç»§ç»­æäº¤æµ‹è¯•');
                }

                // å‘é€ç¿»è¯‘åçš„æ•°æ®åˆ°n8n webhook
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(translatedData)
                });

                if (response.ok) {
                    const result = await response.json();
                    loading.style.display = 'none';
                    successMessage.style.display = 'block';
                } else {
                    throw new Error('æäº¤å¤±è´¥');
                }
            } catch (error) {
                console.error('Error:', error);
                loading.style.display = 'none';
                errorAlert.style.display = 'block';
                form.style.display = 'block';
                submitBtn.disabled = false;
                
                document.getElementById('errorMessage').textContent = 
                    error.message || 'ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•ã€‚å¦‚é—®é¢˜æŒç»­ï¼Œè¯·è”ç³»ï¼šinfo@sdi-osd.de';
            }
        });

        // é‡ç½®é”™è¯¯çŠ¶æ€
        form.addEventListener('input', function(e) {
            if (e.target.classList.contains('error')) {
                e.target.classList.remove('error');
                const errorMessage = e.target.parentNode.querySelector('.error-message');
                if (errorMessage) errorMessage.style.display = 'none';
            }
        });
    </script>
</body>
</html> 