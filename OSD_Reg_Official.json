{
  "name": "OSD_Reg_Official",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "submit-registration",
        "options": {
          "allowedOrigins": "*",
          "noResponseBody": false
        }
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1.1,
      "position": [
        -100,
        200
      ],
      "id": "108d6a61-0297-4a1e-bd82-563525ea5968",
      "name": "Webhook Trigger",
      "webhookId": "6ff74a92-c06a-4505-9f87-29ce59bc13f4"
    },
    {
      "parameters": {
        "jsCode": "// Process payment proof data and attachments\nconst items = $input.all();\n\n// è€ƒè¯•åœºæ¬¡ä»£ç åˆ°ä¸­æ–‡åç§°çš„æ˜ å°„\nconst examSessionMapping = {\n  // åŒ—äº¬è€ƒåœº\n  'A1_BJ_VIP': 'A1å…¨ç§‘ï¼ˆVIPä¸“åœºï¼‰',\n  \n  // æˆéƒ½è€ƒåœº - A1ç­‰çº§\n  'A1_CD_Full': 'A1å…¨ç§‘',\n  'A1_CD_Written': 'A1ç¬”è¯•',\n  'A1_CD_Oral': 'A1å£è¯•',\n  \n  // æˆéƒ½è€ƒåœº - A2ç­‰çº§\n  'A2_CD_Full': 'A2å…¨ç§‘',\n  'A2_CD_Written': 'A2ç¬”è¯•',\n  'A2_CD_Oral': 'A2å£è¯•',\n  \n  // æˆéƒ½è€ƒåœº - B1ç­‰çº§\n  'B1_CD_Full': 'B1å…¨ç§‘',\n  'B1_CD_Listening': 'B1å¬åŠ›',\n  'B1_CD_Oral': 'B1å£è¯­',\n  'B1_CD_Reading': 'B1é˜…è¯»',\n  'B1_CD_Written': 'B1å†™ä½œ'\n};\n\n// è€ƒè¯•åœºæ¬¡ä»£ç åˆ°è€ƒè¯•æ—¥æœŸçš„æ˜ å°„\nconst examDateMapping = {\n  'A1_BJ_VIP': '2025/9/13 (åŒ—äº¬)',\n  'A1_CD_Full': '2025/8/27 (æˆéƒ½)',\n  'A1_CD_Written': '2025/8/27 (æˆéƒ½)',\n  'A1_CD_Oral': '2025/8/27 (æˆéƒ½)',\n  'A2_CD_Full': '2025/8/27 (æˆéƒ½)',\n  'A2_CD_Written': '2025/8/27 (æˆéƒ½)',\n  'A2_CD_Oral': '2025/8/27 (æˆéƒ½)',\n  'B1_CD_Full': '2025/8/27 (æˆéƒ½)',\n  'B1_CD_Listening': '2025/8/27 (æˆéƒ½)',\n  'B1_CD_Oral': '2025/8/27 (æˆéƒ½)',\n  'B1_CD_Reading': '2025/8/27 (æˆéƒ½)',\n  'B1_CD_Written': '2025/8/27 (æˆéƒ½)'\n};\n\n// è€ƒè¯•ç­‰çº§æ˜ å°„\nconst examLevelMapping = {\n  'A1': 'A1ç­‰çº§è€ƒè¯•',\n  'A2': 'A2ç­‰çº§è€ƒè¯•', \n  'B1': 'B1ç­‰çº§è€ƒè¯•'\n};\n\nfor (let item of items) {\n  // Handle test data logging\n  if (item.json.body.test === true) {\n    console.log('ğŸ§ª æ”¶åˆ°æµ‹è¯•æ•°æ®:', {\n      applicationID: item.json.body.applicationID,\n      hasHtml: !!item.json.body.feeDetailsHtml,\n      htmlLength: item.json.body.feeDetailsHtml ? item.json.body.feeDetailsHtml.length : 0,\n      htmlPreview: item.json.body.feeDetailsHtml ? item.json.body.feeDetailsHtml.substring(0, 100) + '...' : 'N/A'\n    });\n    // è·³è¿‡æµ‹è¯•æ•°æ®çš„æ­£å¸¸å¤„ç†æµç¨‹\n    continue;\n  }\n\n  // Handle nationality field\n  if (item.json.body.nationality === 'Other' && item.json.body.otherNationality) {\n    item.json.body.nationality = item.json.body.otherNationality;\n  }\n  \n  // Process exam sessions to determine exam level and exam date\n  if (item.json.body.examSessions) {\n    const sessions = Array.isArray(item.json.body.examSessions) ? \n      item.json.body.examSessions : [item.json.body.examSessions];\n    \n    // Extract exam levels and locations from session codes\n    const levels = new Set();\n    const locations = new Set();\n    const examDetails = [];\n    const examDates = new Set();\n    \n    sessions.forEach(sessionCode => {\n      // è§£æè€ƒè¯•åœºæ¬¡ä»£ç \n      const parts = sessionCode.split('_');\n      if (parts.length >= 3) {\n        const level = parts[0];     // A1, A2, B1\n        const location = parts[1];  // BJ (åŒ—äº¬), CD (æˆéƒ½)\n        const module = parts[2];    // VIP, Full, Written, Oral, Listening, Reading\n        \n        // è½¬æ¢ä½ç½®ä»£ç ä¸ºä¸­æ–‡\n        const locationChinese = location === 'BJ' ? 'åŒ—äº¬' : 'æˆéƒ½';\n        \n        // è·å–ä¸­æ–‡åç§°\n        const sessionName = examSessionMapping[sessionCode] || sessionCode;\n        \n        // è·å–è€ƒè¯•æ—¥æœŸ\n        const examDate = examDateMapping[sessionCode] || 'TBD';\n        \n        levels.add(level);\n        locations.add(locationChinese);\n        examDates.add(examDate);\n        \n        examDetails.push({\n          location: locationChinese,\n          level: level,\n          module: module,\n          sessionCode: sessionCode,\n          sessionName: sessionName,\n          examDate: examDate\n        });\n      }\n    });\n    \n    // Set exam level (æ˜¾ç¤ºæ ¼å¼ï¼šA1ã€A2ç­‰çº§è€ƒè¯•)\n    if (!item.json.body.examLevel || item.json.body.examLevel === '') {\n      const sortedLevels = Array.from(levels).sort();\n      if (sortedLevels.length === 1) {\n        item.json.body.examLevel = examLevelMapping[sortedLevels[0]] || `${sortedLevels[0]}ç­‰çº§è€ƒè¯•`;\n      } else {\n        item.json.body.examLevel = sortedLevels.map(level => examLevelMapping[level] || `${level}ç­‰çº§è€ƒè¯•`).join('ã€');\n      }\n    }\n    \n    // Set exam date based on selected sessions\n    const uniqueDates = Array.from(examDates);\n    if (uniqueDates.length === 1) {\n      item.json.body.examDate = uniqueDates[0];\n    } else if (uniqueDates.length > 1) {\n      // å¦‚æœæœ‰å¤šä¸ªæ—¥æœŸï¼ŒæŒ‰æ—¥æœŸæ’åº\n      item.json.body.examDate = uniqueDates.sort().join('ï¼› ');\n    } else {\n      item.json.body.examDate = 'TBD';\n    }\n    \n    // Set exam sessions display (ä¸­æ–‡åç§°)\n    const sessionNames = sessions.map(code => examSessionMapping[code] || code);\n    item.json.body.examSessionsDisplay = sessionNames.join('ã€');\n    \n    item.json.body.examDetails = examDetails;\n  } else {\n    item.json.body.examDate = 'TBD';\n    item.json.body.examSessionsDisplay = 'æ— ';\n    item.json.body.examLevel = 'N/A';\n  }\n  \n  // Handle fee details HTML for email\n  if (!item.json.body.feeDetailsHtml) {\n    // If front-end didn't provide feeDetailsHtml, generate a simple one\n    if (item.json.body.feeDetails && Array.isArray(item.json.body.feeDetails)) {\n      const feeDetailsHtml = item.json.body.feeDetails.map(detail => \n        `<div style=\"display: flex; justify-content: space-between; margin: 5px 0;\">\n          <span>${detail.description}</span>\n          <span><strong>Â¥${detail.fee}</strong></span>\n        </div>`\n      ).join('');\n      item.json.body.feeDetailsHtml = feeDetailsHtml;\n    } else {\n      item.json.body.feeDetailsHtml = '<div style=\"text-align: center; color: #666;\">æš‚æ— è´¹ç”¨ä¿¡æ¯</div>';\n    }\n  }\n  // If front-end provided feeDetailsHtml, use it directly\n  \n  // Process payment proof attachment\n  if (item.json.body.paymentProof && item.json.body.paymentProof.content) {\n    const paymentData = item.json.body.paymentProof;\n    \n    // Convert base64 to binary buffer\n    const binaryBuffer = Buffer.from(paymentData.content, 'base64');\n    \n    // Create binary data property for payment proof\n    item.binary = item.binary || {};\n    item.binary.paymentProof = {\n      data: binaryBuffer,\n      mimeType: paymentData.mimeType || 'application/octet-stream',\n      fileName: paymentData.filename || 'payment_proof'\n    };\n    \n    // Mark payment as uploaded\n    item.json.body.paymentUploaded = true;\n  } else {\n    item.json.body.paymentUploaded = false;\n  }\n  \n  // Process signed document if still present\n  if (item.json.body.signedDocument && item.json.body.signedDocument.content) {\n    const attachmentData = item.json.body.signedDocument;\n    const binaryBuffer = Buffer.from(attachmentData.content, 'base64');\n    \n    item.binary = item.binary || {};\n    item.binary.signedDocument = {\n      data: binaryBuffer,\n      mimeType: attachmentData.mimeType || 'application/octet-stream',\n      fileName: attachmentData.filename || 'signed_document'\n    };\n  }\n  \n  // Process passport upload if present\n  if (item.json.body.passportUpload && item.json.body.passportUpload.content) {\n    const passportData = item.json.body.passportUpload;\n    const binaryBuffer = Buffer.from(passportData.content, 'base64');\n    \n    item.binary = item.binary || {};\n    item.binary.passport = {\n      data: binaryBuffer,\n      mimeType: passportData.mimeType || 'application/octet-stream',\n      fileName: passportData.filename || 'passport'\n    };\n  }\n  \n  // Add payment submission timestamp\n  if (!item.json.body.paymentSubmissionTime) {\n    item.json.body.paymentSubmissionTime = new Date().toISOString();\n  }\n  \n  // Format timestamps for display\n  item.json.body.paymentSubmissionTimeFormatted = new Date(item.json.body.paymentSubmissionTime).toLocaleString('zh-CN');\n  item.json.body.originalSubmissionTimeFormatted = new Date(item.json.body.timestamp).toLocaleString('zh-CN');\n}\n\nreturn items;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        120,
        200
      ],
      "id": "8cac8659-17d3-4a1b-b7a9-a4820f1f5c37",
      "name": "Process Form Data"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1e7IBYNKiEvdZOscI0YaBK9uk6ReymltU0bWHJZ1e3D8",
          "mode": "list",
          "cachedResultName": "Registration_Sheet",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e7IBYNKiEvdZOscI0YaBK9uk6ReymltU0bWHJZ1e3D8/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1e7IBYNKiEvdZOscI0YaBK9uk6ReymltU0bWHJZ1e3D8/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "FirstName": "={{ $json.body.firstName }}",
            "LastName": "={{ $json.body.lastName }}",
            "Gender": "={{ $json.body.gender }}",
            "BirthDate": "={{ $json.body.birthDate }}",
            "Nationality": "={{ $json.body.nationality }}",
            "BirthPlace": "={{ $json.body.birthPlace }}",
            "Passport": "={{ $json.body.passportNumber }}",
            "E-mail": "={{ $json.body.email }}",
            "Mobile": "={{ $json.body.phoneNumber }}",
            "First_Time": "={{ $json.body.firstTimeExam }}",
            "A2_CD_Written": "={{ $json.body.examSessions ? ($json.body.examSessions.join(',').includes('A2_CD_Written') || $json.body.examSessions.join(',').includes('A2_CD_Full') ? 'TRUE' : 'FALSE') : 'FALSE' }}",
            "A2_CD_Oral": "={{ $json.body.examSessions ? ($json.body.examSessions.join(',').includes('A2_CD_Oral') || $json.body.examSessions.join(',').includes('A2_CD_Full') ? 'TRUE' : 'FALSE') : 'FALSE' }}",
            "A1_CD_Written": "={{ $json.body.examSessions ? ($json.body.examSessions.join(',').includes('A1_CD_Written') || $json.body.examSessions.join(',').includes('A1_CD_Full') ? 'TRUE' : 'FALSE') : 'FALSE' }}",
            "A1_CD_Oral": "={{ $json.body.examSessions ? ($json.body.examSessions.join(',').includes('A1_CD_Oral') || $json.body.examSessions.join(',').includes('A1_CD_Full') ? 'TRUE' : 'FALSE') : 'FALSE' }}",
            "TestDate": "={{ $json.body.examDate }}",
            "PassportUploaded": "={{ $json.body.passportUpload ? 'TRUE' : 'FALSE' }}",
            "Reg_Time": "={{ $json.body.timestamp }}",
            "applicationID": "={{ $json.body.applicationID }}",
            "A1_BJ_VIP": "={{ $json.body.examSessions ? ($json.body.examSessions.join(',').includes('A1_BJ_VIP') || $json.body.examSessions.join(',').includes('A1_BJ_Full') ? 'TRUE' : 'FALSE') : 'FALSE' }}",
            "B1_CD_Listening": "={{ $json.body.examSessions ? ($json.body.examSessions.join(',').includes('B1_CD_Listening') || $json.body.examSessions.join(',').includes('B1_CD_Full') ? 'TRUE' : 'FALSE') : 'FALSE' }}",
            "B1_CD_Oral": "={{ $json.body.examSessions ? ($json.body.examSessions.join(',').includes('B1_CD_Oral') || $json.body.examSessions.join(',').includes('B1_CD_Full') ? 'TRUE' : 'FALSE') : 'FALSE' }}",
            "B1_CD_Reading": "={{ $json.body.examSessions ? ($json.body.examSessions.join(',').includes('B1_CD_Reading') || $json.body.examSessions.join(',').includes('B1_CD_Full') ? 'TRUE' : 'FALSE') : 'FALSE' }}",
            "B1_CD_Written": "={{ $json.body.examSessions ? ($json.body.examSessions.join(',').includes('B1_CD_Written') || $json.body.examSessions.join(',').includes('B1_CD_Full') ? 'TRUE' : 'FALSE') : 'FALSE' }}",
            "totalFee": "={{ $json.body.totalFee }}",
            "ChineseName": "= {{ $json.body.lastName }} {{ $json.body.firstName }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "ChineseName",
              "displayName": "ChineseName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "FirstName",
              "displayName": "FirstName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "LastName",
              "displayName": "LastName",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Gender",
              "displayName": "Gender",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "BirthDate",
              "displayName": "BirthDate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Nationality",
              "displayName": "Nationality",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "BirthPlace",
              "displayName": "BirthPlace",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Passport",
              "displayName": "Passport",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "E-mail",
              "displayName": "E-mail",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Mobile",
              "displayName": "Mobile",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "First_Time",
              "displayName": "First_Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "A1_BJ_VIP",
              "displayName": "A1_BJ_VIP",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "A1_CD_Written",
              "displayName": "A1_CD_Written",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "A1_CD_Oral",
              "displayName": "A1_CD_Oral",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "A2_CD_Written",
              "displayName": "A2_CD_Written",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "A2_CD_Oral",
              "displayName": "A2_CD_Oral",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "B1_CD_Listening",
              "displayName": "B1_CD_Listening",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "B1_CD_Oral",
              "displayName": "B1_CD_Oral",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "B1_CD_Reading",
              "displayName": "B1_CD_Reading",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "B1_CD_Written",
              "displayName": "B1_CD_Written",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "A1_SH_VIP",
              "displayName": "A1_SH_VIP",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "TestDate",
              "displayName": "TestDate",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "PassportUploaded",
              "displayName": "PassportUploaded",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Reg_Time",
              "displayName": "Reg_Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "applicationID",
              "displayName": "applicationID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "totalFee",
              "displayName": "totalFee",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        1000,
        475
      ],
      "id": "15efd31b-856d-4c8c-999c-f6f1fda87d35",
      "name": "Google Sheets",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "j1rmiLMJPNeLMvIB",
          "name": "Tian's Google Sheets"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\"success\": true, \"message\": \"æŠ¥åæˆåŠŸï¼è¯·æŸ¥æ”¶é‚®ä»¶ï¼\"}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        1220,
        275
      ],
      "id": "2b8e5cea-0787-461a-9ab3-fdc1ec7443a6",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "fromEmail": "info@sdi-osd.de",
        "toEmail": "={{ $json.body.email }}",
        "subject": "=ğŸ‰ {{ $json.body.lastName }} {{ $json.body.firstName }} - SDIå¥¥å¾·è€ƒè¯•æŠ¥åæˆåŠŸç¡®è®¤å‡½",
        "html": "=<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>é‡è¦é€šçŸ¥ï¼šæ…•å°¼é»‘SDIå¥¥å¾·è€ƒè¯•ä¸­å¿ƒ | æŠ¥åæˆåŠŸä¸åç»­æ­¥éª¤ç¡®è®¤</title>\n    <style>\n        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap');\n\n        /* é’ˆå¯¹å°å±å¹•è®¾å¤‡è¿›è¡Œä¼˜åŒ– */\n        @media screen and (max-width: 600px) {\n            .container {\n                padding: 15px !important; /* å‡å°ä¸»ä½“å†…å®¹å·¦å³å†…è¾¹è· */\n            }\n            .header-padding {\n                padding: 20px 25px !important; /* è°ƒæ•´å¤´éƒ¨å†…è¾¹è· */\n            }\n            .content-padding {\n                padding: 20px 25px !important; /* è°ƒæ•´å†…å®¹å†…è¾¹è· */\n            }\n            .payment-qr-section {\n                flex-direction: column; /* åœ¨å°å±å¹•ä¸Šæ”¹ä¸ºå‚ç›´å †å  */\n                align-items: center; /* å‚ç›´å †å æ—¶å±…ä¸­å¯¹é½ */\n                gap: 15px !important; /* è°ƒæ•´é—´è· */\n            }\n            .qr-code-wrapper {\n                width: 100%; /* äºŒç»´ç å®¹å™¨å®½åº¦å æ»¡ */\n                max-width: 180px; /* ä¿æŒæœ€å¤§å®½åº¦ */\n                display: flex;\n                justify-content: center; /* äºŒç»´ç å±…ä¸­ */\n            }\n            .qr-code-wrapper img {\n                max-width: 150px !important; /* è¿›ä¸€æ­¥é™åˆ¶äºŒç»´ç å¤§å°ä»¥é€‚åº”å°å±å¹• */\n                height: auto;\n            }\n            .payment-tip-box {\n                width: 100%; /* æç¤ºä¿¡æ¯å®¹å™¨å®½åº¦å æ»¡ */\n                min-height: auto !important; /* ç§»é™¤æœ€å°é«˜åº¦é™åˆ¶ */\n                font-size: 16px !important; /* è°ƒæ•´å­—ä½“å¤§å° */\n                padding: 15px !important; /* è°ƒæ•´å†…è¾¹è· */\n            }\n            .payment-tip-box p {\n                text-align: center !important; /* æ–‡æœ¬å±…ä¸­ */\n            }\n        }\n    </style>\n</head>\n<body style=\"margin: 0; padding: 0; background-color: #f4f4f4; font-family: 'Helvetica Neue', Helvetica, Arial, 'Noto Sans SC', 'Microsoft YaHei', sans-serif;\">\n    <div class=\"container\" style=\"max-width: 680px; margin: 20px auto; background-color: #ffffff; border: 1px solid #e0e0e0; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);\">\n        \n        <div class=\"header-padding\" style=\"padding: 30px 40px; border-bottom: 1px solid #e0e0e0; text-align: left;\">\n            <h1 style=\"color: #003366; font-size: 24px; margin: 0; font-weight: 700;\">\n                è€ƒè¯•æŠ¥åæˆåŠŸä¸åç»­æ­¥éª¤ç¡®è®¤\n            </h1>\n            <p style=\"color: #555555; font-size: 16px; margin: 5px 0 0 0;\">\n                SDI MÃ¼nchen | Ã–SD-PrÃ¼fungszentrum\n            </p>\n        </div>\n\n        <div class=\"content-padding\" style=\"padding: 30px 40px; line-height: 1.7;\">\n            \n            <p style=\"font-size: 16px; color: #333333;\"><strong>å°Šæ•¬çš„ {{ $json.body.lastName }} {{ $json.body.firstName }} åŒå­¦ï¼š</strong></p>\n            <p style=\"font-size: 16px; color: #333333; margin-top: 10px;\">æ‚¨å¥½ï¼</p>\n            <p style=\"font-size: 16px; color: #333333;\">ç¥è´ºæ‚¨æˆåŠŸå®Œæˆæ…•å°¼é»‘SDIè¯­è¨€å¤§å­¦å¥¥å¾·è€ƒè¯•ä¸­å¿ƒçš„è€ƒè¯•æŠ¥åã€‚è¯·ä»”ç»†æ ¸å¯¹æ‚¨çš„æŠ¥åä¿¡æ¯ã€‚</p>\n\n            <div style=\"margin: 30px 0;\">\n                <h2 style=\"font-size: 18px; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 8px; margin-bottom: 20px;\">æ‚¨çš„æŠ¥åä¿¡æ¯</h2>\n                <table style=\"width: 100%; border-collapse: collapse; font-size: 15px;\">\n                    <tr style=\"border-bottom: 1px solid #eeeeee;\"><td style=\"padding: 12px 0; color: #666666; width: 120px;\">ç”³è¯·ç¼–å·:</td><td style=\"padding: 12px 0; color: #000000; font-weight: bold;\">{{ $json.body.applicationID }}</td></tr>\n                    <tr style=\"border-bottom: 1px solid #eeeeee;\"><td style=\"padding: 12px 0; color: #666666;\">æŠ¥åç­‰çº§:</td><td style=\"padding: 12px 0; color: #000000;\">{{ $json.body.examLevel }}</td></tr>\n                    <tr style=\"border-bottom: 1px solid #eeeeee;\"><td style=\"padding: 12px 0; color: #666666;\">æŠ¥åç§‘ç›®:</td><td style=\"padding: 12px 0; color: #000000;\">{{ $json.body.examSessionsDisplay }}</td></tr>\n                    <tr style=\"border-bottom: 1px solid #eeeeee;\"><td style=\"padding: 12px 0; color: #666666;\">è€ƒè¯•æ—¥æœŸ:</td><td style=\"padding: 12px 0; color: #000000;\">{{ $json.body.examDate }}</td></tr>\n                    <tr style=\"border-bottom: 1px solid #eeeeee;\"><td style=\"padding: 12px 0; color: #666666;\">æŠ¤ç…§å·ç :</td><td style=\"padding: 12px 0; color: #000000;\">{{ $json.body.passportNumber }}</td></tr>\n                    <tr><td style=\"padding: 12px 0; color: #666666;\">æŠ¥åæ—¶é—´:</td><td style=\"padding: 12px 0; color: #000000;\">{{ $json.body.originalSubmissionTimeFormatted }}</td></tr>\n                </table>\n            </div>\n            \n            <div style=\"margin: 30px 0; background-color: #f7f9fc; border: 1px solid #e0e5eb; border-radius: 8px; padding: 25px;\">\n                <h2 style=\"font-size: 18px; color: #003366; margin-top: 0; margin-bottom: 20px;\">è´¹ç”¨ä¸æ”¯ä»˜ä¿¡æ¯</h2>\n                \n                {{ $json.body.feeDetailsHtml }}\n                <hr style=\"border: none; border-top: 1px solid #e0e0e0; margin: 15px 0;\">\n                <div style=\"display: flex; justify-content: space-between; align-items: center; font-size: 18px; font-weight: bold;\">\n                    <span style=\"color: #333333;\">åº”ä»˜æ€»é¢:</span>\n                    <span style=\"color: #D9534F;\">Â¥{{ $json.body.totalFee }}</span>\n                </div>\n                \n                <div style=\"margin-top: 25px;\">\n                    {{ $json.body.bankTransferHtml }}\n                </div>\n\n                <div style=\"margin-top: 25px;\">\n                    <h3 style=\"font-size: 16px; color: #333333; margin-bottom: 10px;\">æ‰«ç æ”¯ä»˜</h3>\n                    <div class=\"payment-qr-section\" style=\"display: flex; align-items: center; justify-content: center; gap: 20px; margin: 15px 0;\">\n                        <div class=\"qr-code-wrapper\" style=\"flex-shrink: 0;\">\n    {{ $json.qrCodeHtml }}\n                        </div>\n\n                        <div class=\"payment-tip-box\" style=\"flex-grow: 1; text-align: left; font-size: 16px; font-weight: bold; color: #D9534F; padding: 10px; border: 2px solid #D9534F; border-radius: 8px; background-color: #fffaf0; display: flex; align-items: center; justify-content: center; min-height: 180px;\">\n    \n<p style=\"margin: 0px; text-align: center;\">\n   <span style=\"font-weight: 400;\">1. å¦‚å·¦ä¾§äºŒç»´ç æœªæ­£å¸¸æ˜¾ç¤ºï¼Œè¯·ç›´æ¥ä½¿ç”¨é‚®ä»¶é™„ä»¶ä¸­çš„å›¾ç‰‡æ–‡ä»¶ã€‚</span>\n<br><span style=\"font-weight: 400;\">2. æ‰«ç ä»˜æ¬¾æ—¶ï¼Œè¯·åŠ¡å¿…</span><span style=\"font-weight: 700;\">å¤‡æ³¨æ‚¨çš„ç”³è¯·ç¼–å·</span>ï¼š<br><strong>{{ $json.body.applicationID }}</strong>\n</p>\n          \n</div>\n                    </div>\n                </div>\n\n                <div style=\"margin-top: 20px; padding: 15px; background-color: #e7f3fe; border-left: 5px solid #0056b3; border-radius: 4px; font-size: 14px;\">\n                    <p style=\"margin: 0 0 10px 0;\">è¯·åŠ¡å¿…åœ¨è½¬è´¦æˆ–æ”¯ä»˜æ—¶æ¸…æ™°å¤‡æ³¨æ‚¨çš„â€œ<strong>ç”³è¯·ç¼–å·ï¼š{{ $json.body.applicationID }}</strong>â€ï¼Œä»¥ä¾¿æˆ‘ä»¬å¿«é€Ÿç¡®è®¤æ‚¨çš„ä»˜æ¬¾ã€‚</p>\n                    <p style=\"margin: 0;\">è¯·æŒ‰ç…§é‚®ä»¶æŒ‡å—å®Œæˆç¼´è´¹å¹¶åŠæ—¶ä¸Šä¼ ä»˜è´¹å‡­è¯ã€‚</p>\n                </div>\n            </div>\n\n            <div style=\"margin: 30px 0;\">\n                <h2 style=\"font-size: 18px; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 8px; margin-bottom: 20px;\">æœ€ç»ˆå¸­ä½ç¡®è®¤ï¼šå…³é”®æ­¥éª¤ä¸æˆªæ­¢æ—¥æœŸ</h2>\n                <p style=\"font-size: 15px; color: #333;\">ä¸ºç¡®ä¿æ‚¨çš„è€ƒè¯•å¸­ä½ï¼Œè¯·åŠ¡å¿…åœ¨ <strong style=\"color: #D9534F;\">åŒ—äº¬æ—¶é—´ {{ $('Webhook Trigger').item.json.body.deadlineDate }} 24:00</strong> å‰å®Œæˆä»¥ä¸‹æ‰€æœ‰æ­¥éª¤ã€‚</p>\n                <ol style=\"padding-left: 25px; font-size: 15px; color: #333333;\">\n                    <li style=\"margin-bottom: 15px;\"><strong>ä¸‹è½½å¹¶ç­¾ç½²æ–‡ä»¶ï¼š</strong>è¯·æŸ¥æ”¶æœ¬é‚®ä»¶é™„ä»¶ä¸­çš„ã€Šè€ƒè¯•é¡»çŸ¥ã€‹ï¼Œä»”ç»†é˜…è¯»ååœ¨æŒ‡å®šä½ç½®å®Œæˆæ‰‹å†™ç­¾åã€‚</li>\n                    <li style=\"margin-bottom: 15px;\"><strong>å›ä¼ ç­¾å­—æ–‡ä»¶ï¼š</strong>è¯·å°†å·²ç­¾å­—çš„å®Œæ•´æ–‡ä»¶æ‰«ææˆ–æ‹ç…§ï¼Œé€šè¿‡ä»¥ä¸‹ä»»ä¸€æ–¹å¼å›ä¼ ï¼š\n                        <ul style=\"list-style-type: disc; margin-top: 10px; padding-left: 25px;\">\n                            <li style=\"margin-bottom: 5px;\"><strong>é‚®ä»¶å›å¤ (æ¨è)ï¼š</strong>ç›´æ¥å°†ç­¾å­—æ–‡ä»¶ä½œä¸ºé™„ä»¶å›å¤æœ¬é‚®ä»¶ã€‚</li>\n                            <li><strong>é€šè¿‡é¡¾é—®æäº¤ï¼šï¼š</strong>å°†æ–‡ä»¶æäº¤ç»™æ‚¨çš„ç•™å­¦å’¨è¯¢è€å¸ˆï¼Œç”±å…¶ç»Ÿä¸€è½¬äº¤ã€‚</li>\n                        </ul>\n                    </li>\n                    <li style=\"margin-bottom: 15px;\"><strong>æ”¯ä»˜è€ƒè¯•è´¹ç”¨ï¼š</strong>åœ¨ç­¾ç½²å¹¶å›ä¼ ã€Šè€ƒè¯•é¡»çŸ¥ã€‹åï¼Œè¯·å°½å¿«å®Œæˆè´¹ç”¨æ”¯ä»˜ï¼Œä»¥é”å®šè€ƒè¯•åé¢ã€‚</li>\n                    <li style=\"margin-bottom: 0;\"><strong>è¡¥å……æŠ¤ç…§ä¿¡æ¯ (å¦‚é€‚ç”¨)ï¼š</strong>è‹¥æŠ¥åæ—¶æœªæä¾›æŠ¤ç…§ä¿¡æ¯ï¼Œè¯·æœ€æ™šäº<strong><u>è€ƒå‰14å¤©</u></strong>é€šè¿‡é‚®ä»¶å›å¤è¡¥å……æäº¤ã€‚</li>\n                </ol>\n                <p style=\"margin-top: 20px; font-size: 14px; color: #856404; background-color: #fffbe6; padding: 10px; border-radius: 4px;\">\n                    * <strong>è¯·æ³¨æ„ï¼š</strong>æœªèƒ½åœ¨æˆªæ­¢æ—¥æœŸå‰å®Œæˆä»¥ä¸Šæ‰€æœ‰æ­¥éª¤ï¼Œå°†æ— æ³•ä¸ºæ‚¨ä¿ç•™è€ƒè¯•å¸­ä½ã€‚\n                </p>\n            </div>\n\n            <div style=\"margin: 30px 0;\">\n                <h2 style=\"font-size: 18px; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 8px; margin-bottom: 20px;\">è€ƒå‰å‡†å¤‡æé†’</h2>\n                <ul style=\"padding-left: 25px; font-size: 15px; color: #333333; list-style-type: 'âœ“Â  ';\">\n                    <li style=\"margin-bottom: 10px; padding-left: 10px;\"><strong>æ¥æ”¶è€ƒè¯•ç¡®è®¤å‡½ï¼š</strong>æ­£å¼çš„ã€Šè€ƒè¯•ç¡®è®¤å‡½ã€‹å°†åœ¨è€ƒå‰7å¤©å·¦å³å‘é€è‡³æ‚¨çš„æŠ¥åé‚®ç®±ï¼Œå…¶ä¸­åŒ…å«è¯¦ç»†çš„è€ƒåœºåœ°å€ä¸è§„åˆ™ã€‚</li>\n                    <li style=\"margin-bottom: 10px; padding-left: 10px;\"><strong>æ‰“å°å‡†è€ƒæ–‡ä»¶ï¼š</strong>æ”¶åˆ°æ­£å¼ã€Šè€ƒè¯•ç¡®è®¤å‡½ã€‹åï¼Œè¯·åŠ¡å¿…å°†å…¶æ‰“å°ä¸º<strong>çº¸è´¨ç‰ˆ</strong>ã€‚</li>\n                    <li style=\"margin-bottom: 10px; padding-left: 10px;\"><strong>å¤‡é½è€ƒè¯•è¯ä»¶ï¼š</strong>è€ƒè¯•å½“å¤©å¿…é¡»æºå¸¦ <strong>â‘  æŠ¤ç…§åŸä»¶</strong> å’Œ <strong>â‘¡ çº¸è´¨ç‰ˆã€Šè€ƒè¯•ç¡®è®¤å‡½ã€‹</strong>ã€‚</li>\n                    <li style=\"padding-left: 10px;\"><strong>å‡†æ—¶åˆ°è¾¾ï¼š</strong>è¯·åŠ¡å¿…æå‰30åˆ†é’Ÿåˆ°è¾¾æŒ‡å®šè€ƒåœºï¼Œä»¥å…å»¶è¯¯ã€‚</li>\n                </ul>\n            </div>\n\n            <div style=\"margin: 30px 0;\">\n                <h2 style=\"font-size: 18px; color: #003366; border-bottom: 2px solid #003366; padding-bottom: 8px; margin-bottom: 20px;\">æŠ¥åå–æ¶ˆæ”¿ç­–</h2>\n                <p style=\"font-size: 15px; color: #333;\">æ ¹æ®è§„å®šï¼Œè€ƒè¯•æŠ¥åæ³¨å†Œå…·æœ‰çº¦æŸåŠ›ã€‚ å¦‚éœ€å–æ¶ˆæŠ¥åï¼Œé¡»åœ¨åŒ—äº¬æ—¶é—´2025å¹´8æœˆ5æ—¥å‰ä»¥ä¹¦é¢å½¢å¼æå‡ºç”³è¯·ï¼Œå–æ¶ˆæŠ¥åå¯è·å¾—20%çš„è€ƒè¯•è´¹é€€æ¬¾ã€‚</p>\n            </div>\n\n            <p style=\"font-size: 16px; color: #333333; margin-top: 40px;\">æˆ‘ä»¬æœŸå¾…æ‚¨çš„å›å¤ï¼Œå¹¶é¢„ç¥æ‚¨å¤‡è€ƒé¡ºåˆ©ï¼</p>\n            <p style=\"font-size: 16px; color: #333333;\">å¦‚æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·éšæ—¶é€šè¿‡å›å¤æœ¬é‚®ä»¶æˆ–å‘é€é‚®ä»¶è‡³ <a href=\"mailto:info@sdi-osd.de\" style=\"color: #0056b3; text-decoration: none; font-weight: bold;\">info@sdi-osd.de</a> ä¸æˆ‘ä»¬è”ç³»ã€‚</p>\n            \n            <p style=\"font-size: 16px; color: #333333; margin-top: 40px; margin-bottom: 0;\">æ­¤è‡´ï¼Œ</p>\n            <p style=\"font-size: 16px; color: #333333; margin-top: 5px;\"><strong>æ…•å°¼é»‘SDIè¯­è¨€å¤§å­¦ å¥¥å¾·è€ƒè¯•ä¸­å¿ƒ</strong></p>\n\n        </div>\n\n        <div style=\"background-color: #f4f4f4; padding: 25px 40px; border-top: 1px solid #e0e0e0; font-size: 12px; color: #888888; text-align: left;\">\n            <p style=\"margin: 0;\"><strong>SDI Internationale Hochschule MÃ¼nchen</strong></p>\n            <p style=\"margin: 5px 0 0 0;\"><strong>Ã–SD PrÃ¼fungszentrum</strong></p>\n            <p></p>\n            <p style=\"margin: 10px 0 0 0;\">&copy; 2025 SDI MÃ¼nchen Ã–SD-PrÃ¼fungszentrum. Alle Rechte vorbehalten.</p>\n            <p style=\"margin: 5px 0 0 0;\">ä¸€èˆ¬é—®è¯¢è¯·è”ç³» <a href=\"mailto:info@sdi-osd.de\" style=\"color: #888888; text-decoration: underline;\">info@sdi-osd.de</a>ã€‚ è‹¥å¯¹è€ƒè¯•è¿‡ç¨‹æˆ–ç»“æœæœ‰å¼‚è®®ï¼Œè¯·åœ¨7ä¸ªå·¥ä½œæ—¥å†…è”ç³» <a href=\"mailto:support@sdi-osd.de\" style=\"color: #888888; text-decoration: underline;\">support@sdi-osd.de</a>ã€‚</p>\n        </div>\n\n    </div>\n</body>\n</html>",
        "attachments": "notification, payment_QR",
        "options": {}
      },
      "name": "Send Success Email to Student",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 1,
      "position": [
        1000,
        0
      ],
      "id": "08c37512-c61c-4544-957b-add7ac618de1",
      "credentials": {
        "smtp": {
          "id": "evEHcleKBaWVF93k",
          "name": "info@sdi-osd.de"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "1mHsF7vq0QUDXzFQGNclQmjsRKd0feM6i",
          "mode": "list",
          "cachedResultName": "SDI_exam_notification.pdf",
          "cachedResultUrl": "https://drive.google.com/file/d/1mHsF7vq0QUDXzFQGNclQmjsRKd0feM6i/view?usp=drivesdk"
        },
        "options": {
          "binaryPropertyName": "notification"
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        340,
        100
      ],
      "id": "def91b66-e946-4f0c-a1ca-78a1d246078b",
      "name": "Google Drive",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "6aJEuOpN33rhzgMS",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "fromEmail": "info@sdi-osd.de",
        "toEmail": "info@sdi-osd.de",
        "subject": "=å­¦ç”Ÿå·²å®ŒæˆæŠ¥å - {{ $json.body.lastName }} {{ $json.body.firstName }}",
        "html": "=<div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\"><h2 style=\"color: #4CAF50;\">âœ… å­¦ç”Ÿå·²å®ŒæˆæŠ¥å</h2><div style=\"background: #E8F5E8; padding: 15px; border-radius: 8px; margin: 20px 0;\"><h3>ğŸ‘¤ å­¦ç”Ÿä¿¡æ¯</h3><p>â€¢ <strong>ç”³è¯·ç¼–å·ï¼š</strong>{{ $json.body.applicationID }} </p><p>â€¢ <strong>å§“åï¼š</strong>{{ $json.body.lastName }} {{ $json.body.firstName }}</p><p>â€¢ <strong>æ€§åˆ«ï¼š</strong>{{ $json.body.gender }}</p><p>â€¢ <strong>å‡ºç”Ÿæ—¥æœŸï¼š</strong>{{ $json.body.birthDate }}</p><p>â€¢ <strong>å›½ç±ï¼š</strong>{{ $json.body.nationality }}</p><p>â€¢ <strong>å‡ºç”Ÿåœ°ï¼š</strong>{{ $json.body.birthPlace }}</p><p>â€¢ <strong>é‚®ç®±ï¼š</strong>{{ $json.body.email }}</p><p>â€¢ <strong>æ‰‹æœºå·ç ï¼š</strong>{{ $json.body.phoneNumber }}</p><p>â€¢ <strong>æŠ¤ç…§å·ç ï¼š</strong>{{ $json.body.passportNumber }}</p></div><div style=\"background: #FFF3E0; padding: 15px; border-radius: 8px; margin: 20px 0;\"><h3>ğŸ“š è€ƒè¯•ä¿¡æ¯</h3><p>â€¢ <strong>è€ƒè¯•åœºæ¬¡ï¼š</strong>{{ $json.body.examSessionsDisplay }}</p><p>â€¢ <strong>è€ƒè¯•æ—¥æœŸï¼š</strong>{{ $json.body.examDate }}</p><p>â€¢ <strong>è€ƒè¯•ç­‰çº§ï¼š</strong>{{ $json.body.examLevel }}</p><p><strong>æŠ¥åç§‘ç›®ï¼š</strong>{{ $json.body.examSessionsDisplay }}</p>\n<p><strong>åº”ä»˜è´¹ç”¨ï¼š</strong>Â¥{{ $json.body.totalFee }}</p></div><div style=\"background: #E3F2FD; padding: 15px; border-radius: 8px; margin: 20px 0;\"><h3>â° æ—¶é—´ä¿¡æ¯</h3><p>â€¢ <strong>æŠ¥åæ—¶é—´ï¼š</strong>{{ $json.body.originalSubmissionTimeFormatted }}</p></div><div style=\"background: #FFEBEE; padding: 15px; border-radius: 8px; margin: 20px 0;\"><h3>ğŸ“ é™„ä»¶ä¿¡æ¯</h3><p>â€¢ <strong>æŠ¤ç…§ä¿¡æ¯ï¼š</strong>{{ $json.body.passportUpload ? $json.body.passportUpload.filename : 'æœªä¸Šä¼ ' }}</p></div><p style=\"margin-top: 30px; font-size: 14px; color: #666;\">è¯·åŠæ—¶å¤„ç†å­¦ç”Ÿçš„ä»˜è´¹ç¡®è®¤ï¼Œå¿…è¦æ—¶å¯è”ç³»å­¦ç”Ÿè¿›è¡Œç¡®è®¤ã€‚</p></div>",
        "attachments": "={{ $binary.paymentProof ? ($binary.passport ? ($binary.signedDocument ? 'paymentProof,passport,signedDocument' : 'paymentProof,passport') : ($binary.signedDocument ? 'paymentProof,signedDocument' : 'paymentProof')) : ($binary.passport ? ($binary.signedDocument ? 'passport,signedDocument' : 'passport') : ($binary.signedDocument ? 'signedDocument' : '')) }}",
        "options": {}
      },
      "name": "Send Application Notification to Admin",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 1,
      "position": [
        1000,
        275
      ],
      "id": "6ac26ae4-be43-49b7-b538-031e5b0229c5",
      "credentials": {
        "smtp": {
          "id": "evEHcleKBaWVF93k",
          "name": "info@sdi-osd.de"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nfor (let item of items) {\n  // å·²æ›´æ–°ä¸ºæ‚¨çš„æœ€æ–°é“¾æ¥\n  const imageUrl = \"https://i.jpg.dog/b1e982288bdca96b30ff458134f14b5d.png\";\n  \n  // ç›´æ¥ç”Ÿæˆå¸¦æœ‰è¿™ä¸ªå…¬å¼€URLçš„<img>æ ‡ç­¾\nitem.json.qrCodeHtml = `<img src=\"${imageUrl}\" alt=\"æ”¯ä»˜äºŒç»´ç \" style=\"height: 180px; width: auto; max-width: 100%; border: 1px solid #ddd; border-radius: 8px; display: block;\">`;\n}\n\nreturn items;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        780,
        0
      ],
      "id": "21c3f840-ecd9-468e-bff8-c07ea5e32944",
      "name": "Convert QR to Base64"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        560,
        0
      ],
      "id": "ddd81c58-9d8e-4d78-b458-5ffae5bb0b6c",
      "name": "Merge Binary Data"
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "1fpwCna7rvs0Q7Jxg9XemnpovNtO3lKLV",
          "mode": "list",
          "cachedResultName": "payment_QR.png",
          "cachedResultUrl": "https://drive.google.com/file/d/1fpwCna7rvs0Q7Jxg9XemnpovNtO3lKLV/view?usp=drivesdk"
        },
        "options": {
          "binaryPropertyName": "payment_QR"
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        340,
        -100
      ],
      "id": "2f890c13-58df-4697-ae20-08fb0def2c17",
      "name": "Google Drive1",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "6aJEuOpN33rhzgMS",
          "name": "Google Drive account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook Trigger": {
      "main": [
        [
          {
            "node": "Process Form Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Form Data": {
      "main": [
        [
          {
            "node": "Google Sheets",
            "type": "main",
            "index": 0
          },
          {
            "node": "Google Drive",
            "type": "main",
            "index": 0
          },
          {
            "node": "Send Application Notification to Admin",
            "type": "main",
            "index": 0
          },
          {
            "node": "Google Drive1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Sheets": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive": {
      "main": [
        [
          {
            "node": "Merge Binary Data",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Send Success Email to Student": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Application Notification to Admin": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert QR to Base64": {
      "main": [
        [
          {
            "node": "Send Success Email to Student",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive1": {
      "main": [
        [
          {
            "node": "Merge Binary Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Binary Data": {
      "main": [
        [
          {
            "node": "Convert QR to Base64",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "0e95aa58-ada5-40e6-812c-5aef40da2f2c",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "62c4f474723b914af91e4af15e30298257d6540140abed5d09006251f9987da1"
  },
  "id": "lXF9UvnSHeG0u2Ul",
  "tags": []
}